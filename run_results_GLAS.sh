export CUDA_VISIBLE_DEVICES=0

source /export/livia/home/vision/Aguichemerre/anaconda3/etc/profile.d/conda.sh
conda deactivate
conda activate wsol_histology

#python main.py --task F_CL --encoder_name resnet50 --arch UnetFCAM --runmode final-mode --opt__name_optimizer sgd --batch_size 32 --eval_checkpoint_type best_localization --opt__step_size 50 --opt__gamma 0.1 --max_epochs 50 --freeze_cl True --support_background True --method GradCAMpp --spatial_pooling GAP --dataset GLAS --fold 0 --cudaid 0 --debug_subfolder None --amp True --opt__lr 0.01  --sf_uda False --box_v2_metric False --debug_subfolder None --elb_init_t 1.0 --elb_max_t 10.0 --elb_mulcoef 1.01 --sl_fc True --sl_fc_lambda 1.0 --sl_start_ep 0 --sl_end_ep -1 --sl_min 1 --sl_max 1 --sl_ksz 3 --sl_min_p 0.1 --sl_fg_erode_k 11 --sl_fg_erode_iter 1 --crf_fc True --crf_lambda 2e-09 --crf_sigma_rgb 15.0 --crf_sigma_xy 100.0 --crf_scale 1.0 --crf_start_ep 0 --crf_end_ep -1 --max_sizepos_fc True --max_sizepos_fc_lambda 0.1 --max_sizepos_fc_start_ep 0 --max_sizepos_fc_end_ep -1 --entropy_fc False --exp_id glas_bloc_source_0.01&
python main.py --task STD_CL --encoder_name resnet50 --pixel_wise_classification True --path_cam resnet50-gradcampp-bloc-glas --arch STDClassifier --runmode search-mode --opt__name_optimizer sgd --eval_batch_size 256 --batch_size 32 --eval_checkpoint_type best_localization --opt__lr_classifier_ratio 10.0 --opt__step_size 250 --opt__gamma 0.1 --max_epochs 1000 --freeze_cl False --support_background False --method EnergyCAM --image_classifier True --ece True --ece_lambda 1.0 --neg_samples_partial False --neg_samples_ng False --neg_samples_ng_lambda 0.4 --sl_pc_equalize False --sl_pc_seeder threshold_seeder --sl_min 100 --sl_max 100 --entropy_fc False --entropy_fc_lambda 1.0 --elb_init_t 3. --elb_max_t 10. --elb_mulcoef 1.01 --max_sizepos_fc False --max_sizepos_fc_lambda 0.1 --max_sizepos_fc_start_ep 0 --max_sizepos_fc_end_ep -1 --crf_fc False --crf_lambda 2e-09 --crf_sigma_rgb 2.0 --crf_sigma_xy 100.0 --crf_scale 1.0 --crf_start_ep 0 --crf_end_ep -1 --mil_gated False --spatial_pooling WGAP --dataset GLAS --fold 0 --debug_subfolder None --amp True --opt__lr 0.001 --target_domain_ds_to_compute_stats CAMELYON512 --ds_to_compute_acc_trainset_source_target CAMELYON512 --cmpt_epoch 1 --exp_id Energy_Source_GLAS_Inference_CAMELYON512_target

wait
